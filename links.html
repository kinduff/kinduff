---
  layout: default
title: Links
description: Every time I find an interesting link, I save it to a special list and share it here.
---

<h1>
  Links
  <a href="/links.xml" target="blank" title="RSS feed">
    {% include rss_icon.html %}
  </a>
</h1>

<p>
  Every time I find an interesting link, I save it to a special list and share
  it here.
</p>

<input type="text" id="search" placeholder="Search for links..">

<div style="overflow: auto;">
  <table id="table" class="sortable">
    <thead>
      <tr>
        <th>Link</th>
        <th>Category</th>
        <th>Added at</th>
      </tr>
    </thead>
    <tbody>
      {% assign links_grouped = site.links %}
      {% assign links = links_grouped | reverse %}
      {% for link in links %}
      <tr>
        <td>
          <a href="{{ link.link }}" style>
            <img class="favicon"
              src="https://icons.duckduckgo.com/ip3/{{ link.link | remove:'http://' | remove:'https://' | split:'/' | first }}.ico"
              alt="Favicon of {{ link.link | remove:'http://' | remove:'https://' | split:'/' | first }}"
              width="15px" loading="lazy" />
            {{ link.title }}
          </a>:
          {{ link.description }}
        </td>
        <td class="category">{{ link.category | capitalize }}</td>
        <td style="white-space: nowrap;" data-sort="{{ link.date | date: "%s" }}">{{ link.date | date: "%b %d %Y" }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
<link href="https://cdn.jsdelivr.net/gh/tofsjonas/sortable@latest/sortable-base.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/gh/tofsjonas/sortable@latest/dist/sortable.min.js"></script>
<script src="https://unpkg.com/lunr/lunr.js"></script>
<script>
const searchInput = document.querySelector('#search');
const table = document.querySelector('#table');
const tableRows = Array.from(table.querySelectorAll('tr'));
const dataRows = tableRows.slice(1);

let idx, documents;

function initLunr() {
  documents = dataRows.map((row, i) => {
    return {
      id: i,
      content: row.textContent.trim(),
      row: row
    };
  });

  idx = lunr(function() {
    this.ref('id');
    this.field('content');

    documents.forEach(doc => {
      this.add(doc);
    });
  });
}

initLunr();

searchInput.addEventListener('focus', (e) => {
  umami.track('search focused');
});

searchInput.addEventListener('input', (e) => {
  const query = e.target.value.trim();

  if (!query) {
    dataRows.forEach(row => row.style.display = 'table-row');
    return;
  }

  try {
    const terms = query.trim().split(/\s+/);

    let lunrQuery = '';

    terms.forEach(term => {
      if (term.length > 0) {
        lunrQuery += `${term}~1 ${term}* `;
      }
    });

    const results = idx.search(lunrQuery.trim());
    const matchedIds = new Set(results.map(r => r.ref));

    dataRows.forEach((row, i) => {
      row.style.display = matchedIds.has(i.toString()) ? 'table-row' : 'none';
    });
  } catch (e) {
    dataRows.forEach(row => row.style.display = 'table-row');
  }
});
</script>
